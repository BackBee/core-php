<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:image="http://www.google.com/schemas/sitemap-image/1.1">
    {% for part in this.sitemapLocationIterator(locations, step) %}
        {% for location in part if this.sitemapUrlHelper.isExcluded(location.getUrl()) %}
            <url>
                <loc>{{ this.sitemapUrlHelper.isUrlExtensionRequired(bb.routing.getUri(location.getUrl(), null, site)) }}</loc>
                <lastmod>{{ this.dateHelper(location.modified, 'c') }}</lastmod>
                <changefreq>{{ changeFreq }}</changefreq>
                <priority>{{ this.sitemapLocationPriority(location) }}</priority>
                {% for path in this.sitemapGetImagesByPage(location) if not this.sitemapGetImagesByPage(location) is empty %}
                    <image:image>
                        <image:loc>{{ bb.routing.getUri(path, null, site) }}</image:loc>
                    </image:image>
                {% endfor %}
            </url>
        {% endfor %}
    {% endfor %}
</urlset>
